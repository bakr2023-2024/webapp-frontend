(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function o(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerPolicy&&(n.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?n.credentials="include":e.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(e){if(e.ep)return;e.ep=!0;const n=o(e);fetch(e.href,n)}})();const d=document.getElementById("usersContainer"),a=document.getElementById("createUserForm");async function l(){return await(await fetch("https://webapp-backend-1.onrender.com/users",{mode:"cors"})).json()}async function i(){const r=await l();d&&(d.innerHTML="",r.forEach(t=>{const o=document.createElement("div");o.setAttribute("data-id",t.id);const s=document.createElement("p");s.textContent=`Name: ${t.name}`,o.appendChild(s);const e=document.createElement("p");e.textContent=`Job: ${t.job}`,o.appendChild(e);const n=document.createElement("button");n.textContent="Delete",n.addEventListener("click",()=>p(t.id)),o.appendChild(n);const c=document.createElement("button");c.textContent="Update",c.addEventListener("click",()=>m(t.id,t.name,t.job)),o.appendChild(c),d.appendChild(o)}))}async function u(r){if(r.preventDefault(),!a)return;const t=new FormData(a);(await fetch("https://webapp-backend-1.onrender.com/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Object.fromEntries(t)),mode:"cors"})).ok?(i(),a.reset()):console.error("Failed to create user")}async function p(r){(await fetch(`https://webapp-backend-1.onrender.com/users/${r}`,{method:"DELETE",mode:"cors"})).ok?i():console.error("Failed to delete user")}async function m(r,t,o){const s=prompt("Enter new name:",t),e=prompt("Enter new job:",o);s!==null&&e!==null&&((await fetch(`https://webapp-backend-1.onrender.com/users/${r}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:s,job:e}),mode:"cors"})).ok?i():console.error("Failed to update user"))}a&&a.addEventListener("submit",u);i();
